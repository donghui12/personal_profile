## 实际使用与经验总结

### 1. Jenkins（自建，定时拉取）

- 通过 Docker 部署 Jenkins。
- 未部署在集群中，采用定时任务扫描目标代码仓库。
- 如果发现更新：
  - 自动拉取代码；
  - 根据 `Dockerfile` 构建镜像；
  - 执行部署流程（如推送至镜像仓库、重启服务等）。
- Jenkins 是典型的传统 CI 工具，插件丰富，可灵活定制流程。

---

### 2. Drone

- 使用 `.drone.yml` 配置构建流程，结构清晰。
- 对接 Git 仓库进行触发，适合小型项目或轻量构建流程。
- 更现代的认证方式，如 OAuth 与 Git 权限整合。
- 相比 Jenkins 更轻量，易于容器化部署。

---

### 3. GitLab + 公司内部平台（DCS）

- 使用 GitLab 托管代码及配置 CI/CD 流程。
- 内部平台 DCS 负责构建与部署操作。
- 流程通常为：
  - GitLab CI 触发构建；
  - 构建产物上传至 DCS；
  - DCS 执行部署任务。

---

### 4. Kaniko（构建镜像）

- 主要在 Kubernetes 的 Pod 中使用 Kaniko 构建镜像。
- 应用场景：
  - 本地环境为 macOS，构建镜像架构与生产环境不一致；
  - 部门未完善完整的 CI/CD 平台。
- Kaniko 可以在无特权的环境中安全构建镜像，适合构建 Job 场景。

---

### 5. Argo CD（GitOps 部署）

- 公司 CI/CD 体系未完善时，测试使用 Argo CD 实现 GitOps。
- 从 Git 仓库拉取声明式 YAML 配置，自动同步部署到 Kubernetes。
- 具备状态对比、自动同步、回滚等功能。
- 支持多环境部署和多集群管理。

---
### 总结建议
- 选择工具时应结合团队规模、技术栈、交付频率等因素；
- 建议逐步引入 GitOps 流程，用 Argo CD 等工具增强可观测性和可回滚性；
- 在集群内构建镜像建议使用 Kaniko，提升一致性与安全性；
- 小型项目推荐 Drone 或 GitHub Actions，快速上手；
- 企业级项目推荐 GitLab CI + Argo CD + 内部平台结合方案。